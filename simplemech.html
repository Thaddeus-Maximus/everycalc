<!DOCTYPE html>
<link rel="stylesheet" href="style.css"> 
<script type="text/javascript" src="specs.js"></script>
<script type="text/javascript" src="dual_chart.js"></script>
<script type="text/javascript">
	unit_sys = 0;
	inputs_unit_map = {
		"motor_stall_torque": ["N-m", "N-m"],
		"motor_stall_torque_adj": ["N-m", "N-m"],
		"encoder_cpx": ["c/m", "c/ft"],
		"radius": ["mm","in"],
		"load": ["N", "lbf"],
		"mass": ["kg", "lbm"],
		"theor_freespd": ["m/s", "ft/s"],
		"theor_runspd": ["m/s", "ft/s"],
		"theor_stall_force": ["N", "lbf"],

		"mass_ref": ["kg", "lbm"],
		"moi_ref": ["kg m^2", "lbm in^2"],
		"radius_ref": ["m"," in"],
		"velocity_ref": ["m/s", "ft/s"],
		"position_ref": ["m", "ft"],

		"xout": ["m", "ft"],
		"vout": ["m/s", "ft/s"]
	}

	function populate_units() {
		if(document.getElementById('unit_metric').checked)
			unit_sys = 0;
		else 
			unit_sys = 1;
		
		unit_labels = document.getElementsByClassName('unit');
		//console.log(unit_labels);
		for (unit in unit_labels) {
			if (unit_labels[unit].id && inputs_unit_map[unit_labels[unit].id.substring(5)] ){
				varname = unit_labels[unit].id.substring(5);
				document.getElementById('unit_'+varname).innerHTML = '['+inputs_unit_map[varname][unit_sys]+']';
			}
		}

		document.getElementById('chart_position_label').innerHTML = 'Position ['+inputs_unit_map['xout'][unit_sys]+']';
		document.getElementById('chart_velocity_label').innerHTML = 'Velocity ['+inputs_unit_map['vout'][unit_sys]+']';
	}

	function switch_units() {
		populate_units();
		compute();
	}

	function get_motor_data(motor,key){
		return motor_data[motor][key];
	}

	function gidv(id, ignore_units) {

		v =  eval(document.getElementById(id).value);
		if ((!ignore_units) && typeof inputs_unit_map[id] !== 'undefined')
			v = convert(v, inputs_unit_map[id][unit_sys]);
		return v;
	}

	function gids(id, value, places) {
		if (typeof places === 'undefined')
			places = 3;
		if (typeof value === 'string') {
			document.getElementById(id).value = value;
		} else {
			if (typeof inputs_unit_map[id] !== 'undefined')
				value = convert_to(value, inputs_unit_map[id][unit_sys]);
			document.getElementById(id).value = value.toFixed(places);
		}
	}

	function thload() {
		var inputs, index;

		populate_units();

		inputs = document.getElementsByTagName('input');
		for (index = 0; index < inputs.length; ++index) {
		    inputs[index].onkeyup = function(e) {
		    	var key = e.keyCode ? e.keyCode : e.which;

		    	if (key==13) {
		    		compute(true);
		    	} else {
		    		compute(false);
		    	}
		    }
		}

		select = document.getElementById("motortype");
		i=0;
		for(motor in motor_data) {
			i++;
			opt = document.createElement('option');
			opt.innerHTML = motor_data[motor]["plain_name"];
			opt.value = motor;
			select.appendChild(opt);
		}

		calc_ratio();
		motortype_select(document.getElementById("motortype"));
		
	}

	function compute(simulate) {
		simulate = typeof simulate !== 'undefined' ? simulate : true;
		document.getElementById('charts').classList.add('uncomputed');
		document.getElementById('endcond_met').classList.add('uncomputed');
		document.getElementById('current_cons').classList.add('uncomputed');
		document.getElementById('current_end').classList.add('uncomputed');

		var dt = 0;
		// overall, solve: alpha = (T-Mres)/I
		// make x, v, theta, omega available
		var R = gidv("radius"); var r = gidv('radius', true);
		var M = gidv("mass");   var m = gidv('mass',   true);
		var TS = gidv("motor_stall_torque_adj"); var Ts = gidv('motor_stall_torque_adj', true);
		var wf = gidv("motor_max_rpm_adj") * 2*Math.PI/60; // convert to rad/s!
		var If = gidv("motor_free_current_adj");
		var Is = gidv("motor_stall_current_adj");
		var G = gidv("G");

		//console.log(r,m,Ts,wf,If,Is,G);

		load_expr = document.getElementById("load").value;
		end_expr = document.getElementById("endcond").value;

		if(end_expr == "") end_expr = "0";

		I = M*R*R;

		alpha_ar = [0,0];
		omega_ar = [0,0];
		theta_ar = [0];
		t_ar = [0];

		omega=0; theta=0; theta_m=0; omega_m=0; v=0; x=0; t=0;
		T = G*TS*(wf-omega_ar[omega_ar.length-1]*G)/wf;
		Mres = eval(load_expr)*R;
		if(isNaN(Mres)) Mres = 0;
		// T = Mres -> G*Ts - G*Ts*omega_m/wf = Mres -> omega_m = (G*Ts - Mres)/(G*Ts/wf)
		omega_m_theor = (G*TS - Mres)/(G*TS/wf);
		gids("theor_freespd", R*wf/G)
		gids("theor_runspd", R*omega_m_theor/G);
		gids("theor_stall_force", G*TS/R);
		gids("theor_stall_current", If + (Is-If) * (wf-omega_m_theor)/wf);

		enc_plc = document.getElementById('encoder_placement').value;
		//console.log(enc_plc);
		enc_els = document.getElementsByClassName('encoder_detail');
		if (enc_plc == 'none') {
			for (i=0;i<enc_els.length;i++) {
				enc_els[i].style.display = 'none';
			}
		} else {
			for (i=0;i<enc_els.length;i++) {
				enc_els[i].style.display = 'table-row';
			}

			cpx = gidv('encoder_cpr')/NaNto1(gidv('encoder_reduction'))/(r*2*Math.PI);
			if(enc_plc == 'motor') cpx *= G;

			console.log(cpx);
			gids('encoder_cpx', cpx);
			gids('encoder_max_cps', cpx*R*wf/G);
		}

		if (!simulate) return; // YARRR, NO MORE PLAIN CALCS BEYOND THIS POINT

		cur_cons = 0;

		alpha_o = NaN;

		tdata = [0];
		xdata = [0];
		vdata = [0];
      	i=0;
		while(1) {
			//console.log(dt);
			omega = omega_ar[omega_ar.length-1] * 60/2/Math.PI;
			theta = theta_ar[theta_ar.length-1] * 2/Math.PI;
			t = t_ar[t_ar.length-1];
			x = convert_to(theta_ar[theta_ar.length-1]*R, inputs_unit_map['xout'][unit_sys]);
			v = convert_to(omega_ar[omega_ar.length-1]*R, inputs_unit_map['vout'][unit_sys]);
			omega_m = omega*G;
			theta_m = theta*G;

			T = G*TS*(wf-omega_ar[omega_ar.length-1]*G)/wf;
			Mres = convert(eval(load_expr), inputs_unit_map["load"][unit_sys])*R;
			if(isNaN(Mres)) Mres = 0;
			alpha = (T-Mres) / I;
			//console.log(T, Mres, alpha);
			if(isNaN(alpha_o)) alpha_o = alpha;

			alpha_ar.push(alpha);

			// Use Adams-Bradforth Method
			theta_ar.push(theta_ar[theta_ar.length-1] + omega_ar[omega_ar.length-1]*dt*3/2 - omega_ar[omega_ar.length-2]*dt*1/2);
			omega_ar.push(omega_ar[omega_ar.length-1] + alpha_ar[alpha_ar.length-1]*dt*3/2 - alpha_ar[alpha_ar.length-2]*dt*1/2);
			t_ar.push(t_ar[t_ar.length-1]+dt);
			

			cur_cons = cur_cons + dt*(If + (Is-If)*(wf-omega_ar[omega_ar.length-1]*G)/wf);

			tdata.push(t_ar[t_ar.length-1]);
			xdata.push(convert_to(omega_ar[omega_ar.length-1]*R, inputs_unit_map['xout'][unit_sys]));
			vdata.push(convert_to(theta_ar[theta_ar.length-1]*R, inputs_unit_map['vout'][unit_sys]));

			if (i > 1000 || eval(end_expr)) break;

			dt = Math.min(0.1,Math.max(1e-7,Math.min(Math.abs(wf/G/alpha_o),Math.abs(wf/G/alpha))/30));
			i++;
		}

		omega_ar.shift(); //remove the first element of this array that was there for adams-bradforth 

		drawchart1(tdata, xdata, vdata);
		document.getElementById('charts').classList.remove('uncomputed');
		document.getElementById('endcond_met').classList.remove('uncomputed');
		document.getElementById('current_cons').classList.remove('uncomputed');
		document.getElementById('current_end').classList.remove('uncomputed');

      	gids("endcond_met", eval(end_expr) ? t_ar[t_ar.length-1]:"NOT MET");
      	gids("current_cons", cur_cons);
      	gids("current_end", (If + (Is-If)*(wf-G*omega_ar[omega_ar.length-1])/wf));
	}

	function motortype_select() {
		e=document.getElementById("motortype");
		var props = ["max_rpm", "stall_torque", "free_current", "stall_current"];
		props.forEach(function(a) {
			
			document.getElementById("motor_"+a).value=get_motor_data(e.value, a);
			adjVal = get_motor_data(e.value, a)*gidv("op_voltage")/12;
			if (a=="stall_torque")
				adjVal *= gidv("motornum")*gidv("efficiency")/100;
			if (a=="free_current" || a=="stall_current" )
				adjVal *= gidv("motornum");
			gids("motor_"+a+"_adj",adjVal);
		});

		compute();
	}

	function NaNto1(x) {
		if (isNaN(x))
			return 1;
		return x;
	}

	function calc_ratio() {
		var G = 1;
		G *= NaNto1(gidv("G1B"));
		G *= NaNto1(gidv("G2B"));
		G *= NaNto1(gidv("G3B"));
		G *= NaNto1(gidv("G4B"));
		G /= NaNto1(gidv("G1A"));
		G /= NaNto1(gidv("G2A"));
		G /= NaNto1(gidv("G3A"));
		G /= NaNto1(gidv("G4A"));

		gids("G", G);
	}

	function collapse(id) {
		el = document.getElementById('detail_'+id);
		btn = document.getElementById('toggle_detail_'+id);
		if(el.style['display'] != 'none') {
			el.style['display'] = 'none';
			btn.innerHTML = "&#9660";
		} else {
			el.style['display'] = 'inherit';
			btn.innerHTML = "&#9650";
		}
	}

</script>

<script style="text/javascript">
	function makeTicks(xmax, x2max, n) {
		if (xmax < 0 || x2max < 0) return [0];
		h = xmax/n; h2 = x2max/n;
		base = Math.floor(Math.log10(h));
		base2 = Math.floor(Math.log10(h2));
		h = Math.round(h/Math.pow(10, base))*Math.pow(10, base);
		h2 = Math.round(h2/Math.pow(10, base2))*Math.pow(10, base2);
		ticks = [];
		ticksstr = [];
		for(var i=0; h*(i-1) < xmax || h2*(i-1) < x2max; i++) {
			ticks.push(h*i);
			ticksstr.push((h*i).toFixed(base > 0 ? 0:-base));
		}
		return [ticks, ticksstr];
	}

	function sign(x) {
		if(x>0) return 1;
		if(x<0) return -1;
		return 0;
	}

	function drawTicks(axis, ticks, ticklabels, ff, f0, gf, g0, max, marg) {
		altaxis = axis == 'x' ? 'y':'x';
		realaxis = axis == 'z' ? 'y':axis;
		xgrid = document.getElementById(axis+'_grid');
		while(xgrid.firstChild) xgrid.removeChild(xgrid.firstChild);

		labels = document.getElementById(axis+'_labels');
		while(labels.children.length>1) labels.removeChild(labels.lastChild);

		gfl = (axis=='z'?gf:g0) + (axis=='y'?-1:1)*marg;

		for (i in ticks) {
			line = document.createElementNS('http://www.w3.org/2000/svg','line');
			line.setAttribute(altaxis+'1', gf); line.setAttribute(altaxis+'2', g0);
			fp = f0 + (ff-f0)/(max-0)*ticks[i];
			line.setAttribute(realaxis+'1', fp);
			line.setAttribute(realaxis+'2', fp);
			line.setAttribute('class', 'grid');
			xgrid.append(line);

			label = document.createElementNS('http://www.w3.org/2000/svg','text');
			label.setAttribute(altaxis, gfl);
			label.setAttribute(realaxis, fp);
			label.innerHTML = i==0 ? '0' : ticklabels[i];
			labels.append(label);
		}
	}

		
	function removeElementsByClass(className){
	    var elements = document.getElementsByClassName(className);
	    while(elements.length > 0){
	        elements[0].parentNode.removeChild(elements[0]);
	    }
	}

	function svglen(svg, v) {
		l = svg.createSVGLength();
		l.baseVal = v;
		l.animVal = v;
		return l;
	}

	function drawchart1(x,y,z) {
		svg = document.getElementById('chart_position');
		x_axis = document.getElementById('x_axis');
		y_axis = document.getElementById('y_axis');
		x0 = Math.min(y_axis.x1.baseVal.value, y_axis.x2.baseVal.value);
		xf = Math.max(y_axis.x1.baseVal.value, y_axis.x2.baseVal.value);
		y0 = Math.max(x_axis.y1.baseVal.value, x_axis.y2.baseVal.value);
		yf = Math.min(x_axis.y1.baseVal.value, x_axis.y2.baseVal.value);
		z0 = y0; zf = yf;

		y_line = document.getElementById('y_line');
		z_line = document.getElementById('z_line');
		y_line.setAttribute("points",""); // I don't like it, but it does clear the points
		z_line.setAttribute("points",""); // I don't like it, but it does clear the points

		[xticks, xticklabels] = makeTicks(Math.max(...x), Math.max(...x), 9);
		[yticks, yticklabels] = makeTicks(Math.max(...y), Math.max(...z), 6);
		[zticks, zticklabels] = makeTicks(Math.max(...z), Math.max(...y), 6);
		xmax = xticks[xticks.length-1];
		ymax = yticks[yticks.length-1];
		zmax = zticks[zticks.length-1];

		drawTicks('x', xticks, xticklabels, xf, x0, yf, y0, xmax, 15);
		drawTicks('y', yticks, yticklabels, yf, y0, xf, x0, ymax, 5);
		drawTicks('z', zticks, zticklabels, zf, z0, xf, x0, zmax, 5);

		for (i in x) {
			var pty = svg.createSVGPoint();
			var ptz = svg.createSVGPoint();
			pty.x = ptz.x = x0 + (xf-x0)/(xmax-0)*x[i];
			pty.y = y0 + (yf-y0)/(ymax-0)*y[i];
			ptz.y = z0 + (zf-z0)/(zmax-0)*z[i];
			y_line.points.appendItem(pty);
			z_line.points.appendItem(ptz);
		}
	}
</script>


<html>
<body onload="thload()">
	<div style="display:table;">
	<div style="width: 420px; float: left; display:table-cell;" class="container">
	<h3>Thad's Mechanism Calculator</h3>
	<center><a href="./">Back To Index</a></center>

	<div class="odd">
		<center>
			  <input type="radio" id="unit_english" name="unit" value="english" onclick="switch_units()">
			  <label for="english">English</label>
			  <input type="radio" id="unit_metric" name="unit" value="metric" onclick="switch_units()" checked>
			  <label for="metric">Metric</label><br>
		</center>
	</div>

	

	<div class="even">
		<div>
			<span class="rowlabel"># Motors<span class="ttt">How many motors do you have in total for this mechanism (assuming they're identical, and geared together)</span></span>
			<input class='narrow' id="motornum" oninput="motortype_select()" value=1 />

			<span class="rowlabel">Voltage<span class="ttt">What voltage are the motors ran at? (assuming that the nominal motor performance is at 12V)</span></span>
			<input class='narrow' id="op_voltage" oninput="motortype_select()" value=12 />
			<span class="unit">[V]</span>
			
			<span class="rowlabel">Efficiency<span class="ttt">Efficiency of the transmission</span></span>
			<input class='narrow'  id="efficiency" oninput="motortype_select()" value=85 />
			<span class="unit">[%]</span>
			
		</div>
		<div>
			
			Motor
			<select class="doublewide" id="motortype" oninput="motortype_select()"></select>
			<button type="button" onclick="collapse('motor')" id='toggle_detail_motor'>&#9660;</button>
		</div>
	<table id='detail_motor' style='display:none;'>
		<tr>
			<th></th>
			<th class="collabel">Raw Motor</th>
			<th class="collabel">Adjusted</th>
			<th></th>
		</tr>
		<tr>
			<th class="rowlabel">Free Speed<span class="ttt">The maximum RPM of the motor</span></th>
			<td><input id="motor_max_rpm" readonly /></td>
			<td><input id="motor_max_rpm_adj" readonly /></td>
			<td class="unit">[RPM]</td>
		</tr><tr>
			<th class="rowlabel">Stall Torque<span class="ttt">The maximum torque of the motor, occurring at 0 RPM</span></th>
			<td><input id="motor_stall_torque" readonly /></td>
			<td><input id="motor_stall_torque_adj" readonly /></td>
			<td class="unit" id="unit_motor_stall_torque"></td>
		</tr><tr>
			<th class="rowlabel">Free Current<span class="ttt">The current drawn when the motor is unloaded</span></th>
			<td><input id="motor_free_current" readonly /></td>
			<td><input id="motor_free_current_adj" readonly /></td>
			<td class="unit">[A]</td>
		</tr><tr>
			<th class="rowlabel">Stall Current<span class="ttt">The current drawn at 0 RPM / Max Torque</span></th>
			<td><input id="motor_stall_current" readonly /></td>
			<td><input id="motor_stall_current_adj" readonly /></td>
			<td class="unit">[A]</td>
		</tr>
	</table>
</div>
	<div class="odd">
		<div>
		<span class='rowlabel'>Gear Ratio<span class="ttt">The overall gear ratio. Larger than 1 is a reduction, smaller is a RPM increase. Empty cells are assumed to be 1. You can either blank out all the cells, and plug in a number in the top right one, or build a ratio by typing in the number of teeth on each gear (or belts/sprockets) starting from the motor.</span></span>
		<input id="G" readonly/>
		<button type="button" onclick="collapse('gratio')" id='toggle_detail_gratio'>&#9660;</button>
	</div>
	<table id='detail_gratio' style="display:none;">
		<tr>
			<td><input id="G1A" oninput="calc_ratio()" /></td>
			<td class="tiny">:</td>
			<td><input id="G1B" oninput="calc_ratio()" /></td>
		</tr><tr>
			<td><input id="G2A" oninput="calc_ratio()" /></td>
			<td class="tiny">:</td>
			<td><input id="G2B" oninput="calc_ratio()" /></td>
		</tr><tr>
			<td><input id="G3A" oninput="calc_ratio()" /></td>
			<td class="tiny">:</td>
			<td><input id="G3B" oninput="calc_ratio()" /></td>
		</tr><tr>
			<td><input id="G4A" oninput="calc_ratio()" /></td>
			<td class="tiny">:</td>
			<td><input id="G4B" oninput="calc_ratio()" /></td>
		</tr>
	</table>
</div><div class="even">
	<div>
		<span class="rowlabel">Encoder Relativity<span class="ttt">(Optional) Where is the encoder placed - on (or in) the motor, or on the output shaft?</span></span>
			<select id="encoder_placement" onchange="compute(false)">
				<option value="none">No Encoder</option>
				<option value="motor">To Motor</option>
				<option value="output">To Output</option>
			</select>
		<button type="button" onclick="collapse('encoder')" id='toggle_detail_encoder'>&#9660;</button>
		</div>
		<table id='detail_encoder' style='display:none;'>
		<tr class='encoder_detail'>
			<th class="rowlabel">CPR<span class="ttt">Encoder Counts Per Revolution<br/>(you can also put ticks, and ticks will be computed. Math is the same)</span></th>
			<td><input id="encoder_cpr" onchange="compute(false)" value=1 /></td>
			<th class="rowlabel">C/x<span class="ttt">Encoder Counts Per Distance Traveled<br/>(how many encoder counts per unit distance traveled)</span></th>
			<td><input id="encoder_cpx" value=1 readonly /></td>
			<td class="unit" id="unit_encoder_cpx"></td>
		</tr><tr class='encoder_detail'>
			<th class="rowlabel">Reduction<span class="ttt">Additional reduction applied between the shaft and the encoder</span></th>
			<td><input id="encoder_reduction" onchange="compute(false)" value='' /></td>
			<th class="rowlabel">Max CPS<span class="ttt">Maximum Counts per Second, at free speed</span></th>
			<td><input id="encoder_max_cps" value=1 readonly /></td>
		</tr>
	</table></div>
	<div class="odd">
		<table>
		<tr>
			<th class="rowlabel">Radius <span class="ttt">Radius of the output.<br/>If this is an arm, input the length of the arm.<br/>If this is an elevator, input the radius of the spool.<br/>If this is a drivetrain, input the radius of the wheel.</span></th>
			<td><input id="radius" oninput="" value=0.1 /></td>
			<td class="unit" id="unit_radius"></td>
		</tr><tr>
			<th class="rowlabel">Load Equation<span class="ttt">(Optional) Load equation. You can put a simple number here, or you can put an expression.<br/>If you put an expression, you can use any javascript operators (+,-,*,/,Math.sin(...),...).<br/>You can use any variables described in the pullout below.</span></th>
			<td><input id="load" oninput="" /></td>
			<td class="unit" id="unit_load"></td>
		</tr><tr>
			<th class="rowlabel">Mass<span class="ttt">(Optional) [Equivalent] Mass.<br/>If you're running a linear device, you can just put its mass in here.<br/>If you are analyzing a rotational device, you can put the moment of inertia, divided by the radius squared here.</span></th>
			<td><input id="mass" oninput="" value=1.0 /></td>
			<td class="unit" id="unit_mass"></td>
		</tr><tr>
			<th class="rowlabel">End Condition<span class="ttt">(Optional) End condition. Must be an expression that logically evaluates.<br/>You can use any javascript operators/comparators (+,-,*,/,>,<,Math.sin(...),...).<br/>You can use any variables described in the pullout below.</span></th>
			<td><input id="endcond" oninput="" value="t > 5"/></td>
		</tr>
	</table>
<div class="even">
	Variable reference for use in expressions
	<button type="button" onclick="collapse('varref')" id='toggle_detail_varref'>&#9660;</button>
	<table id='detail_varref' style='display:none;'>
			<tr><th class='rowlabel'>G</th><td class="unit">[-]</td><td>Overall gear ratio</td></tr>
			<tr><th class='rowlabel'>m</th><td class="unit" id="unit_mass_ref">[kg]</td><td>Mass</td></tr>
			<tr><th class='rowlabel'>I</th><td class="unit" id="unit_moi_ref"></td><td>MOI</td></tr>
			<tr><th class='rowlabel'>r</th><td class="unit" id="unit_radius_ref"></td><td>Radius</td></tr>
			<tr><th class='rowlabel'>t</th><td class="unit">[s]</td><td>Time</td></tr>
			<tr><th class='rowlabel'>v</th><td class="unit" id="unit_velocity_ref"></td><td>Lin. Velocity</td></tr>
			<tr><th class='rowlabel'>x</th><td class="unit" id="unit_position_ref"></td><td>Lin. Position</td></tr>
			<tr><th class='rowlabel'>omega</th><td class="unit">[RPM]</td><td>Rot. Velocity</td></tr>
			<tr><th class='rowlabel'>theta</th><td class="unit">[Rev]</td><td>Rot. Position</td></tr>
			<tr><th class='rowlabel'>omega_m</th><td class="unit">[RPM]</td><td>Rot. Motor Velocity</td></tr>
			<tr><th class='rowlabel'>theta_m</th><td class="unit">[Rev]</td><td>Rot. Motor Position</td></tr>
	</table>
	<center><button type="button" onclick="compute()">Compute!</button></center>
</div>
<div  class="output">
	<table>
		<tr>
			<th class="rowlabel">End Condition Met in t=<span class="ttt">When simulation terminated if the end condition was met. If not, it will tell you the end condition was unmet.</span></th>
			<td><input id="endcond_met" readonly /></td>
			<td class="unit">[s]</td>
		</tr><tr>
			<th class="rowlabel">Current Used<span class="ttt">Total electrical consumption in the simulation period</span></th>
			<td><input id="current_cons" readonly /></td>
			<td class="unit">[A-s]</td>
		</tr><tr>
			<th class="rowlabel">Current At End<span class="ttt">Current drawn at the end of the simulation period</span></th>
			<td><input id="current_end" readonly /></td>
			<td class="unit">[A]</td>
		</tr>
		<tr>
			<th class="rowlabel">No Load Speed<span class="ttt">Speed without any load on the system.<br/>Equivalent to the JVN calc.</span></th>
			<td><input id="theor_freespd" readonly /></td>
			<td class="unit" id="unit_theor_freespd"></td>
		</tr><tr>
			<th class="rowlabel">Running Speed<span class="ttt">Speed while running at steady-state, ASSUMING THAT ALL TRANSIENT VARIABLES (v,x,omega,theta) ARE ZERO.<br/>Equivalent to the JVN calc.</span></th>
			<td><input id="theor_runspd" readonly /></td>
			<td class="unit" id="unit_theor_runspd"></td>
		</tr><tr>
			<th class="rowlabel">Stall Force<span class="ttt">Force produced while at stall (ignoring external load/mass)<br/>Equivalent to the JVN calc.</span></th>
			<td><input id="theor_stall_force" readonly /></td>
			<td class="unit" id="unit_theor_stall_force"></td>
		</tr><tr>
			<th class="rowlabel">Running Current<span class="ttt">Current consumption while running at steady-state, ASSUMING THAT ALL TRANSIENT VARIABLES (v,x,omega,theta) ARE ZERO.<br/>Equivalent to the JVN calc.</span></th>
			<td><input id="theor_stall_current" readonly /></td>
			<td class="unit">[A]</td>
		</tr>
	</table>
	</div>
</div></div>

<!--<div class="even">
	<button type="button" onclick="compute()">CALCULATE!</button>
</div>-->


<div style="margin-left: 0px; display:table-cell;" class="container" id="charts">

<svg version="1.2" class="graph" id='chart_position' aria-labelledby="title" role="img">
  <title id="title">Position/Velocity Data</title>

<g class="x-grid" id="xAxes">
  <line id="x_axis" class="axes" x1="50" x2="50" y1="20" y2="450"></line>
</g>
<g class="y-grid" id="yAxes">
  <line id="y_axis" class="axes" x1="50" x2="705" y1=450 y2=450></line>
</g>
<g class="y-grid" id="zAxes">
  <line id="z_axis" class="axes" x1="705" x2="705" y1="20" y2=450></line>
</g>

<g class="x-grid" id="x_grid">
</g>
<g class="y-grid" id="y_grid">
</g>
<g class="z-grid" id="z_grid">
</g>
  <g class="labels x-labels" id='x_labels'>
  <text x="375" y=485 class="label-title">Time [s]</text>
</g>
<g class="labels y-labels" id='y_labels'>
  <text x=-220 y=10 class="label-title" transform="rotate(270)" id="chart_velocity_label">Velocity</text>
</g>
<g class="labels z-labels" id='z_labels'>
  <text x=-220 y=760 class="label-title" transform="rotate(270)" id="chart_position_label">Position</text>
</g>
<polyline
	id='y_line'
	fill='none'
	stroke='#0074d9'
	stroke-width=2
	points="
	"/>
<polyline
	id='z_line'
	fill='none'
	stroke='#d91200'
	stroke-width=2
	points="
	"/>

</svg>
	</div>
</div>
</body>
</html>